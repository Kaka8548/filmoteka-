{"mappings":"iiBAAA,ICKIA,EACAC,EDNJC,EAAAC,EAAA,S,oDCAAC,EAAAD,EAAA,S,0BAQe,SAAAE,EAAoBC,EAAMC,EAAWC,GAClDR,EAAUM,EAAKG,KACfR,EAAgBK,EAAKI,YACrB,IAAIC,EAAQ,EACRC,OAAOC,OAAOC,OAAS,MACzBH,EAAQ,GAGV,IAAMI,EAAYC,SAASC,eAAe,4BAEpCC,EAAU,CACdC,WAAYlB,EACZmB,aAAc,GACdC,aAAcV,EACdF,KAAMT,EACNsB,aAAa,EACbC,SAAU,CACRd,KAAM,4CACNe,YAAa,wDACbC,WAAY,kDACZC,WACE,0HAMAC,EAAa,IAAIC,EAAAxB,GAAJ,CAAeW,EAAWG,GAC3BF,SAASa,cAAc,cAC/BC,YAAc7B,EAAgB,GAExC0B,EAAWI,GAAG,aAAa,SAAAC,GACzB,IAAMR,EAAcQ,EAAMvB,MACR,aAAdF,GACF,EAAA0B,EAAAC,WAAU,WAAY,CAAEzB,KAAMe,IAAeW,MAAK,SAAAC,IAChD,EAAAC,EAAAC,iBAAgBF,EAAI9B,KAAKiC,Q,IAEJ,kBAAdhC,IACT,EAAA0B,EAAAC,WAAU,gBAAiB,CAAEzB,KAAMe,EAAagB,MAAOhC,IAAa2B,MAClE,SAAAC,IACE,EAAAC,EAAAC,iBAAgBF,EAAI9B,KAAKiC,Q,IAI3BP,EAAMvB,KAAO,KACIO,SAASa,cAAc,eAC/BC,YAAc,I,IDjDxB,I,EAAMW,G,EAAab,EAAA1B,EAAA,CAAA0B,EAAAc,GAAAC,MAAA,SAAAC,EAAMnC,G,IAGxB2B,E,yEAFUpB,SAASa,cAAc,mBAC/BgB,UAAYC,EAAAC,Q,UACF,EAAAd,EAAAC,WAAUD,EAAAe,SAAU,CAAEvC,KAAc,I,OAAhD2B,EAAGa,EAAAC,MAET,EAAAb,EAAAC,iBAAgBF,EAAI9B,KAAKiC,SACzBlC,EAAW+B,EAAI9B,KAAM,Y,oDANSG,G,iCAS1B0C,EAAOnC,SAASa,cAAc,iBACpCb,SAASa,cAAc,sBAAsBuB,iBAAiB,SAAS,WACrEX,IACAU,EAAKE,O,IAEPrC,SAASa,cAAc,eAAeuB,iBAAiB,SAAS,WAC9DX,IACAU,EAAKE,O,IAEPZ,IEvBAvC,EAAAC,EAAA,S,qDAK+B,WAC7B,IACIqC,EADEc,EAAOtC,SAASa,cAAc,iBAE9B0B,EAAavC,SAASa,cAAc,uB,SAI3B2B,I,OAAAA,EAAf5B,EAAA1B,EAAA,CAAA0B,EAAAc,GAAAC,MAAA,SAAAC,EAAwBa,G,IAIdC,EAKFC,EAIAvB,E,qEAZNqB,EAAEG,iBACFL,EAAWzB,YAAc,GAEnB4B,EAAkBD,EAAEI,cAAlBH,YACJlB,IAAUkB,EAAYI,MAAK,C,uDAIzBH,EAAU3C,SAASa,cAAc,mBAEvCW,EAAQkB,EAAYI,M,UAEF,EAAA7B,EAAAC,WAAUD,EAAA8B,cAAe,CAAEtD,KAAM,EAAG+B,U,UAEtB,KAF1BJ,EAAGa,EAAAC,MAED5C,KAAKiC,QAAQyB,OAAY,C,uBAC/BT,EAAWzB,YACT,uD,2BAGJ6B,EAAQd,UAAYC,EAAAC,SACpB,EAAAV,EAAAC,iBAAgBF,EAAI9B,KAAKiC,SACzBlC,EAAW+B,EAAI9B,KAAM,gBAAiBkC,G,6CAtBjByB,MAAAC,KAAAC,U,CAFvBb,EAAKF,iBAAiB,U,SAEEK,G,OAATD,EAAQS,MAAAC,KAAAC,U,IA0BzBC,G","sources":["src/js/utilities/onTrending.js","src/js/utilities/pagination.js","src/js/utilities/onFindFilmTitle.js"],"sourcesContent":["import { onRenderGallery } from './onRenderGallery';\nimport { fetchData, TRENDING } from './fetchData';\nimport { loading } from '../constants/loading';\nimport Pagination from './pagination';\n\nexport const onTrending = async page => {\n  const gallery = document.querySelector('.film-selection');\n  gallery.innerHTML = loading;\n  const res = await fetchData(TRENDING, { page: (page = 1) });\n\n  onRenderGallery(res.data.results);\n  Pagination(res.data, 'TRENDING');\n};\n\nconst form = document.querySelector('.header__form');\ndocument.querySelector('.header-logo__link').addEventListener('click', () => {\n  onTrending();\n  form.reset();\n});\ndocument.querySelector('[data-home]').addEventListener('click', () => {\n  onTrending();\n  form.reset();\n});\nonTrending();\n","import Pagination from 'tui-pagination';\n// import 'tui-pagination/dist/tui-pagination.css';\nimport { fetchData } from './fetchData';\nimport { onRenderGallery } from './onRenderGallery';\n\nlet pageNum;\nlet totalItemsNum;\n\nexport default function Pagination(data, queryType, queryWord) {\n  pageNum = data.page;\n  totalItemsNum = data.total_pages;\n  let pages = 5;\n  if (window.screen.width >= 768) {\n    pages = 9;\n  }\n\n  const container = document.getElementById('tui-pagination-container');\n\n  const options = {\n    totalItems: totalItemsNum,\n    itemsPerPage: 20,\n    visiblePages: pages,\n    page: pageNum,\n    centerAlign: true,\n    template: {\n      page: '<a href=\"#\" class=\"page-btn\">{{page}}</a>',\n      currentPage: '<a href=\"#\" class=\"page-btn is-selected\">{{page}}</a>',\n      moveButton: '<a href=\"#\" class=\"page-btn page-{{type}}\"></a>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\" id=\"point-{{type}}\">' +\n        '<span class=\"tui-ico-ellip\">...</span>' +\n        '</a>',\n    },\n  };\n\n  const pagination = new Pagination(container, options);\n  const lastBtnEl = document.querySelector('.page-last');\n  lastBtnEl.textContent = totalItemsNum / 20;\n\n  pagination.on('afterMove', event => {\n    const currentPage = event.page;\n    if (queryType === 'TRENDING') {\n      fetchData('TRENDING', { page: currentPage }).then(res => {\n        onRenderGallery(res.data.results);\n      });\n    } else if (queryType === 'SEARCH_MOVIES') {\n      fetchData('SEARCH_MOVIES', { page: currentPage, query: queryWord }).then(\n        res => {\n          onRenderGallery(res.data.results);\n        }\n      );\n    }\n    if (event.page > 1) {\n      const firstBtnEl = document.querySelector('.page-first');\n      firstBtnEl.textContent = '1';\n    }\n  });\n}\n","import { onRenderGallery } from './onRenderGallery';\nimport { fetchData, SEARCH_MOVIES } from './fetchData';\nimport { loading } from '../constants/loading';\nimport Pagination from './pagination';\n\nexport const onFindFilmTitle = () => {\n  const form = document.querySelector('.header__form');\n  let query;\n  const errorField = document.querySelector('.header-error__text');\n\n  form.addEventListener('submit', onSubmit);\n\n  async function onSubmit(e) {\n    e.preventDefault();\n    errorField.textContent = '';\n\n    const { searchQuery } = e.currentTarget;\n    if (query === searchQuery.value) {\n      return;\n    }\n\n    const gallery = document.querySelector('.film-selection');\n\n    query = searchQuery.value;\n\n    const res = await fetchData(SEARCH_MOVIES, { page: 1, query });\n\n    if (res.data.results.length === 0) {\n      errorField.textContent =\n        'There is no films with such name. Please, try again.';\n      return;\n    }\n    gallery.innerHTML = loading;\n    onRenderGallery(res.data.results);\n    Pagination(res.data, 'SEARCH_MOVIES', query);\n  }\n};\n\nonFindFilmTitle();\n"],"names":["$2cf82e57be6dc984$var$pageNum","$2cf82e57be6dc984$var$totalItemsNum","$bpxeT","parcelRequire","$1VFfL","$2cf82e57be6dc984$export$2e2bcd8739ae039","data","queryType","queryWord","page","total_pages","pages","window","screen","width","container","document","getElementById","options","totalItems","itemsPerPage","visiblePages","centerAlign","template","currentPage","moveButton","moreButton","pagination","$parcel$interopDefault","querySelector","textContent","on","event","$5JgHg","fetchData","then","res","$k7R8L","onRenderGallery","results","query","$346899a0a034fd98$export$105d94fe592039ac","$2TvXO","mark","_callee","innerHTML","$bSQtk","loading","TRENDING","_ctx","sent","$346899a0a034fd98$var$form","addEventListener","reset","form","errorField","_onSubmit","e","searchQuery","gallery","preventDefault","currentTarget","value","SEARCH_MOVIES","length","apply","this","arguments","$7ecc6853ab9e7250$export$8f8a41cec030ce32"],"version":3,"file":"index.7c918834.js.map"}